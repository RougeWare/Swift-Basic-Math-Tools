//
//  Wrapping tests.swift
//  
//
//  Created by SðŸŒŸSystem on 2022-08-21.
//

import XCTest
import BasicMathTools



final class Wrapping_Tests: XCTestCase {
    
    func testGlobalWrap() {
        XCTAssertEqual(5, wrap(min: 2, value: 0, max: 7), accuracy: 0.00001)
        XCTAssertEqual(6, wrap(min: 2, value: 1, max: 7), accuracy: 0.00001)
        XCTAssertEqual(2, wrap(min: 2, value: 2, max: 7), accuracy: 0.00001)
        XCTAssertEqual(3, wrap(min: 2, value: 3, max: 7), accuracy: 0.00001)
        XCTAssertEqual(4, wrap(min: 2, value: 4, max: 7), accuracy: 0.00001)
        XCTAssertEqual(5, wrap(min: 2, value: 5, max: 7), accuracy: 0.00001)
        XCTAssertEqual(6, wrap(min: 2, value: 6, max: 7), accuracy: 0.00001)
        XCTAssertEqual(2, wrap(min: 2, value: 7, max: 7), accuracy: 0.00001)
        XCTAssertEqual(3, wrap(min: 2, value: 8, max: 7), accuracy: 0.00001)
        XCTAssertEqual(4, wrap(min: 2, value: 9, max: 7), accuracy: 0.00001)


        XCTAssertEqual(6.9, wrap(min: 2, value: 1.9, max: 7), accuracy: 0.00001)
        XCTAssertEqual(6.99, wrap(min: 2, value: 1.99, max: 7), accuracy: 0.00001)
        XCTAssertEqual(6.999, wrap(min: 2, value: 1.999, max: 7), accuracy: 0.00001)

        XCTAssertEqual(2.0, wrap(min: 2, value: 2.0, max: 7), accuracy: 0.00001)
        XCTAssertEqual(2.0001, wrap(min: 2, value: 2.0001, max: 7), accuracy: 0.00001)
        XCTAssertEqual(2.001, wrap(min: 2, value: 2.001, max: 7), accuracy: 0.00001)
        XCTAssertEqual(2.01, wrap(min: 2, value: 2.01, max: 7), accuracy: 0.00001)
        XCTAssertEqual(2.1, wrap(min: 2, value: 2.1, max: 7), accuracy: 0.00001)


        XCTAssertEqual(6.9, wrap(min: 2, value: 6.9, max: 7), accuracy: 0.00001)
        XCTAssertEqual(6.99, wrap(min: 2, value: 6.99, max: 7), accuracy: 0.00001)
        XCTAssertEqual(6.999, wrap(min: 2, value: 6.999, max: 7), accuracy: 0.00001)

        XCTAssertEqual(2.0, wrap(min: 2, value: 7.0, max: 7), accuracy: 0.00001)
        XCTAssertEqual(2.0001, wrap(min: 2, value: 7.0001, max: 7), accuracy: 0.00001)
        XCTAssertEqual(2.001, wrap(min: 2, value: 7.001, max: 7), accuracy: 0.00001)
        XCTAssertEqual(2.01, wrap(min: 2, value: 7.01, max: 7), accuracy: 0.00001)
        XCTAssertEqual(2.1, wrap(min: 2, value: 7.1, max: 7), accuracy: 0.00001)
    }
    
    
    func testInstanceWithRange() {
        
        XCTAssertEqual(3, (-9).wrapped(within: 3..<5))
        XCTAssertEqual(4, (-8).wrapped(within: 3..<5))
        XCTAssertEqual(3, (-7).wrapped(within: 3..<5))
        XCTAssertEqual(4, (-6).wrapped(within: 3..<5))
        XCTAssertEqual(3, (-5).wrapped(within: 3..<5))
        XCTAssertEqual(4, (-4).wrapped(within: 3..<5))
        XCTAssertEqual(3, (-3).wrapped(within: 3..<5))
        XCTAssertEqual(4, (-2).wrapped(within: 3..<5))
        XCTAssertEqual(3, (-1).wrapped(within: 3..<5))
        XCTAssertEqual(4, ( 0).wrapped(within: 3..<5))
        XCTAssertEqual(3, ( 1).wrapped(within: 3..<5))
        XCTAssertEqual(4, ( 2).wrapped(within: 3..<5))
        XCTAssertEqual(3, ( 3).wrapped(within: 3..<5))
        XCTAssertEqual(4, ( 4).wrapped(within: 3..<5))
        XCTAssertEqual(3, ( 5).wrapped(within: 3..<5))
        XCTAssertEqual(4, ( 6).wrapped(within: 3..<5))
        XCTAssertEqual(3, ( 7).wrapped(within: 3..<5))
        XCTAssertEqual(4, ( 8).wrapped(within: 3..<5))
        
        XCTAssertEqual(3, (-9).wrapped(within: 3..<6))
        XCTAssertEqual(4, (-8).wrapped(within: 3..<6))
        XCTAssertEqual(5, (-7).wrapped(within: 3..<6))
        XCTAssertEqual(3, (-6).wrapped(within: 3..<6))
        XCTAssertEqual(4, (-5).wrapped(within: 3..<6))
        XCTAssertEqual(5, (-4).wrapped(within: 3..<6))
        XCTAssertEqual(3, (-3).wrapped(within: 3..<6))
        XCTAssertEqual(4, (-2).wrapped(within: 3..<6))
        XCTAssertEqual(5, (-1).wrapped(within: 3..<6))
        XCTAssertEqual(3, ( 0).wrapped(within: 3..<6))
        XCTAssertEqual(4, ( 1).wrapped(within: 3..<6))
        XCTAssertEqual(5, ( 2).wrapped(within: 3..<6))
        XCTAssertEqual(3, ( 3).wrapped(within: 3..<6))
        XCTAssertEqual(4, ( 4).wrapped(within: 3..<6))
        XCTAssertEqual(5, ( 5).wrapped(within: 3..<6))
        XCTAssertEqual(3, ( 6).wrapped(within: 3..<6))
        XCTAssertEqual(4, ( 7).wrapped(within: 3..<6))
        XCTAssertEqual(5, ( 8).wrapped(within: 3..<6))
        XCTAssertEqual(3, ( 9).wrapped(within: 3..<6))
        
        XCTAssertEqual(41, (-99).wrapped(within: 30..<50))
        XCTAssertEqual(42, (-98).wrapped(within: 30..<50))
        XCTAssertEqual(43, (-97).wrapped(within: 30..<50))
        XCTAssertEqual(44, (-96).wrapped(within: 30..<50))
        XCTAssertEqual(45, (-95).wrapped(within: 30..<50))
        XCTAssertEqual(46, (-94).wrapped(within: 30..<50))
        XCTAssertEqual(47, (-93).wrapped(within: 30..<50))
        XCTAssertEqual(48, (-92).wrapped(within: 30..<50))
        XCTAssertEqual(49, (-91).wrapped(within: 30..<50))
        XCTAssertEqual(30, (-90).wrapped(within: 30..<50))
        XCTAssertEqual(31, (-89).wrapped(within: 30..<50))
        XCTAssertEqual(32, (-88).wrapped(within: 30..<50))
        XCTAssertEqual(33, (-87).wrapped(within: 30..<50))
        XCTAssertEqual(34, (-86).wrapped(within: 30..<50))
        XCTAssertEqual(35, (-85).wrapped(within: 30..<50))
        XCTAssertEqual(36, (-84).wrapped(within: 30..<50))
        XCTAssertEqual(37, (-83).wrapped(within: 30..<50))
        XCTAssertEqual(38, (-82).wrapped(within: 30..<50))
        XCTAssertEqual(39, (-81).wrapped(within: 30..<50))
        XCTAssertEqual(40, (-80).wrapped(within: 30..<50))
        XCTAssertEqual(41, (-79).wrapped(within: 30..<50))
        XCTAssertEqual(42, (-78).wrapped(within: 30..<50))
        XCTAssertEqual(43, (-77).wrapped(within: 30..<50))
        XCTAssertEqual(44, (-76).wrapped(within: 30..<50))
        XCTAssertEqual(45, (-75).wrapped(within: 30..<50))
        XCTAssertEqual(46, (-74).wrapped(within: 30..<50))
        XCTAssertEqual(47, (-73).wrapped(within: 30..<50))
        XCTAssertEqual(48, (-72).wrapped(within: 30..<50))
        XCTAssertEqual(49, (-71).wrapped(within: 30..<50))
        XCTAssertEqual(30, (-70).wrapped(within: 30..<50))
        XCTAssertEqual(31, (-69).wrapped(within: 30..<50))
        XCTAssertEqual(32, (-68).wrapped(within: 30..<50))
        XCTAssertEqual(33, (-67).wrapped(within: 30..<50))
        XCTAssertEqual(34, (-66).wrapped(within: 30..<50))
        XCTAssertEqual(35, (-65).wrapped(within: 30..<50))
        XCTAssertEqual(36, (-64).wrapped(within: 30..<50))
        XCTAssertEqual(37, (-63).wrapped(within: 30..<50))
        XCTAssertEqual(38, (-62).wrapped(within: 30..<50))
        XCTAssertEqual(39, (-61).wrapped(within: 30..<50))
        XCTAssertEqual(40, (-60).wrapped(within: 30..<50))
        XCTAssertEqual(41, (-59).wrapped(within: 30..<50))
        XCTAssertEqual(42, (-58).wrapped(within: 30..<50))
        XCTAssertEqual(43, (-57).wrapped(within: 30..<50))
        XCTAssertEqual(44, (-56).wrapped(within: 30..<50))
        XCTAssertEqual(45, (-55).wrapped(within: 30..<50))
        XCTAssertEqual(46, (-54).wrapped(within: 30..<50))
        XCTAssertEqual(47, (-53).wrapped(within: 30..<50))
        XCTAssertEqual(48, (-52).wrapped(within: 30..<50))
        XCTAssertEqual(49, (-51).wrapped(within: 30..<50))
        XCTAssertEqual(30, (-50).wrapped(within: 30..<50))
        XCTAssertEqual(31, (-49).wrapped(within: 30..<50))
        XCTAssertEqual(32, (-48).wrapped(within: 30..<50))
        XCTAssertEqual(33, (-47).wrapped(within: 30..<50))
        XCTAssertEqual(34, (-46).wrapped(within: 30..<50))
        XCTAssertEqual(35, (-45).wrapped(within: 30..<50))
        XCTAssertEqual(36, (-44).wrapped(within: 30..<50))
        XCTAssertEqual(37, (-43).wrapped(within: 30..<50))
        XCTAssertEqual(38, (-42).wrapped(within: 30..<50))
        XCTAssertEqual(39, (-41).wrapped(within: 30..<50))
        XCTAssertEqual(40, (-40).wrapped(within: 30..<50))
        XCTAssertEqual(41, (-39).wrapped(within: 30..<50))
        XCTAssertEqual(42, (-38).wrapped(within: 30..<50))
        XCTAssertEqual(43, (-37).wrapped(within: 30..<50))
        XCTAssertEqual(44, (-36).wrapped(within: 30..<50))
        XCTAssertEqual(45, (-35).wrapped(within: 30..<50))
        XCTAssertEqual(46, (-34).wrapped(within: 30..<50))
        XCTAssertEqual(47, (-33).wrapped(within: 30..<50))
        XCTAssertEqual(48, (-32).wrapped(within: 30..<50))
        XCTAssertEqual(49, (-31).wrapped(within: 30..<50))
        XCTAssertEqual(30, (-30).wrapped(within: 30..<50))
        XCTAssertEqual(31, (-29).wrapped(within: 30..<50))
        XCTAssertEqual(32, (-28).wrapped(within: 30..<50))
        XCTAssertEqual(33, (-27).wrapped(within: 30..<50))
        XCTAssertEqual(34, (-26).wrapped(within: 30..<50))
        XCTAssertEqual(35, (-25).wrapped(within: 30..<50))
        XCTAssertEqual(36, (-24).wrapped(within: 30..<50))
        XCTAssertEqual(37, (-23).wrapped(within: 30..<50))
        XCTAssertEqual(38, (-22).wrapped(within: 30..<50))
        XCTAssertEqual(39, (-21).wrapped(within: 30..<50))
        XCTAssertEqual(40, (-20).wrapped(within: 30..<50))
        XCTAssertEqual(41, (-19).wrapped(within: 30..<50))
        XCTAssertEqual(42, (-18).wrapped(within: 30..<50))
        XCTAssertEqual(43, (-17).wrapped(within: 30..<50))
        XCTAssertEqual(44, (-16).wrapped(within: 30..<50))
        XCTAssertEqual(45, (-15).wrapped(within: 30..<50))
        XCTAssertEqual(46, (-14).wrapped(within: 30..<50))
        XCTAssertEqual(47, (-13).wrapped(within: 30..<50))
        XCTAssertEqual(48, (-12).wrapped(within: 30..<50))
        XCTAssertEqual(49, (-11).wrapped(within: 30..<50))
        XCTAssertEqual(30, (-10).wrapped(within: 30..<50))
        XCTAssertEqual(31, (-09).wrapped(within: 30..<50))
        XCTAssertEqual(32, (-08).wrapped(within: 30..<50))
        XCTAssertEqual(33, (-07).wrapped(within: 30..<50))
        XCTAssertEqual(34, (-06).wrapped(within: 30..<50))
        XCTAssertEqual(35, (-05).wrapped(within: 30..<50))
        XCTAssertEqual(36, (-04).wrapped(within: 30..<50))
        XCTAssertEqual(37, (-03).wrapped(within: 30..<50))
        XCTAssertEqual(38, (-02).wrapped(within: 30..<50))
        XCTAssertEqual(39, (-01).wrapped(within: 30..<50))
        XCTAssertEqual(40, (-00).wrapped(within: 30..<50))
        XCTAssertEqual(40, ( 00).wrapped(within: 30..<50))
        XCTAssertEqual(41, ( 01).wrapped(within: 30..<50))
        XCTAssertEqual(42, ( 02).wrapped(within: 30..<50))
        XCTAssertEqual(43, ( 03).wrapped(within: 30..<50))
        XCTAssertEqual(44, ( 04).wrapped(within: 30..<50))
        XCTAssertEqual(45, ( 05).wrapped(within: 30..<50))
        XCTAssertEqual(46, ( 06).wrapped(within: 30..<50))
        XCTAssertEqual(47, ( 07).wrapped(within: 30..<50))
        XCTAssertEqual(48, ( 08).wrapped(within: 30..<50))
        XCTAssertEqual(49, ( 09).wrapped(within: 30..<50))
        XCTAssertEqual(30, ( 10).wrapped(within: 30..<50))
        XCTAssertEqual(31, ( 11).wrapped(within: 30..<50))
        XCTAssertEqual(32, ( 12).wrapped(within: 30..<50))
        XCTAssertEqual(33, ( 13).wrapped(within: 30..<50))
        XCTAssertEqual(34, ( 14).wrapped(within: 30..<50))
        XCTAssertEqual(35, ( 15).wrapped(within: 30..<50))
        XCTAssertEqual(36, ( 16).wrapped(within: 30..<50))
        XCTAssertEqual(37, ( 17).wrapped(within: 30..<50))
        XCTAssertEqual(38, ( 18).wrapped(within: 30..<50))
        XCTAssertEqual(39, ( 19).wrapped(within: 30..<50))
        XCTAssertEqual(40, ( 20).wrapped(within: 30..<50))
        XCTAssertEqual(41, ( 21).wrapped(within: 30..<50))
        XCTAssertEqual(42, ( 22).wrapped(within: 30..<50))
        XCTAssertEqual(43, ( 23).wrapped(within: 30..<50))
        XCTAssertEqual(44, ( 24).wrapped(within: 30..<50))
        XCTAssertEqual(45, ( 25).wrapped(within: 30..<50))
        XCTAssertEqual(46, ( 26).wrapped(within: 30..<50))
        XCTAssertEqual(47, ( 27).wrapped(within: 30..<50))
        XCTAssertEqual(48, ( 28).wrapped(within: 30..<50))
        XCTAssertEqual(49, ( 29).wrapped(within: 30..<50))
        XCTAssertEqual(30, ( 30).wrapped(within: 30..<50))
        XCTAssertEqual(31, ( 31).wrapped(within: 30..<50))
        XCTAssertEqual(32, ( 32).wrapped(within: 30..<50))
        XCTAssertEqual(33, ( 33).wrapped(within: 30..<50))
        XCTAssertEqual(34, ( 34).wrapped(within: 30..<50))
        XCTAssertEqual(35, ( 35).wrapped(within: 30..<50))
        XCTAssertEqual(36, ( 36).wrapped(within: 30..<50))
        XCTAssertEqual(37, ( 37).wrapped(within: 30..<50))
        XCTAssertEqual(38, ( 38).wrapped(within: 30..<50))
        XCTAssertEqual(39, ( 39).wrapped(within: 30..<50))
        XCTAssertEqual(40, ( 40).wrapped(within: 30..<50))
        XCTAssertEqual(41, ( 41).wrapped(within: 30..<50))
        XCTAssertEqual(42, ( 42).wrapped(within: 30..<50))
        XCTAssertEqual(43, ( 43).wrapped(within: 30..<50))
        XCTAssertEqual(44, ( 44).wrapped(within: 30..<50))
        XCTAssertEqual(45, ( 45).wrapped(within: 30..<50))
        XCTAssertEqual(46, ( 46).wrapped(within: 30..<50))
        XCTAssertEqual(47, ( 47).wrapped(within: 30..<50))
        XCTAssertEqual(48, ( 48).wrapped(within: 30..<50))
        XCTAssertEqual(49, ( 49).wrapped(within: 30..<50))
        XCTAssertEqual(30, ( 50).wrapped(within: 30..<50))
        XCTAssertEqual(31, ( 51).wrapped(within: 30..<50))
        XCTAssertEqual(32, ( 52).wrapped(within: 30..<50))
        XCTAssertEqual(33, ( 53).wrapped(within: 30..<50))
        XCTAssertEqual(34, ( 54).wrapped(within: 30..<50))
        XCTAssertEqual(35, ( 55).wrapped(within: 30..<50))
        XCTAssertEqual(36, ( 56).wrapped(within: 30..<50))
        XCTAssertEqual(37, ( 57).wrapped(within: 30..<50))
        XCTAssertEqual(38, ( 58).wrapped(within: 30..<50))
        XCTAssertEqual(39, ( 59).wrapped(within: 30..<50))
        XCTAssertEqual(40, ( 60).wrapped(within: 30..<50))
        XCTAssertEqual(41, ( 61).wrapped(within: 30..<50))
        XCTAssertEqual(42, ( 62).wrapped(within: 30..<50))
        XCTAssertEqual(43, ( 63).wrapped(within: 30..<50))
        XCTAssertEqual(44, ( 64).wrapped(within: 30..<50))
        XCTAssertEqual(45, ( 65).wrapped(within: 30..<50))
        XCTAssertEqual(46, ( 66).wrapped(within: 30..<50))
        XCTAssertEqual(47, ( 67).wrapped(within: 30..<50))
        XCTAssertEqual(48, ( 68).wrapped(within: 30..<50))
        XCTAssertEqual(49, ( 69).wrapped(within: 30..<50))
        XCTAssertEqual(30, ( 70).wrapped(within: 30..<50))
        XCTAssertEqual(31, ( 71).wrapped(within: 30..<50))
        XCTAssertEqual(32, ( 72).wrapped(within: 30..<50))
        XCTAssertEqual(33, ( 73).wrapped(within: 30..<50))
        XCTAssertEqual(34, ( 74).wrapped(within: 30..<50))
        XCTAssertEqual(35, ( 75).wrapped(within: 30..<50))
        XCTAssertEqual(36, ( 76).wrapped(within: 30..<50))
        XCTAssertEqual(37, ( 77).wrapped(within: 30..<50))
        XCTAssertEqual(38, ( 78).wrapped(within: 30..<50))
        XCTAssertEqual(39, ( 79).wrapped(within: 30..<50))
        XCTAssertEqual(40, ( 80).wrapped(within: 30..<50))
        XCTAssertEqual(41, ( 81).wrapped(within: 30..<50))
        XCTAssertEqual(42, ( 82).wrapped(within: 30..<50))
        XCTAssertEqual(43, ( 83).wrapped(within: 30..<50))
        XCTAssertEqual(44, ( 84).wrapped(within: 30..<50))
        XCTAssertEqual(45, ( 85).wrapped(within: 30..<50))
        XCTAssertEqual(46, ( 86).wrapped(within: 30..<50))
        XCTAssertEqual(47, ( 87).wrapped(within: 30..<50))
        XCTAssertEqual(48, ( 88).wrapped(within: 30..<50))
        XCTAssertEqual(49, ( 89).wrapped(within: 30..<50))
        XCTAssertEqual(30, ( 90).wrapped(within: 30..<50))
        XCTAssertEqual(31, ( 91).wrapped(within: 30..<50))
        XCTAssertEqual(32, ( 92).wrapped(within: 30..<50))
        XCTAssertEqual(33, ( 93).wrapped(within: 30..<50))
        XCTAssertEqual(34, ( 94).wrapped(within: 30..<50))
        XCTAssertEqual(35, ( 95).wrapped(within: 30..<50))
        XCTAssertEqual(36, ( 96).wrapped(within: 30..<50))
        XCTAssertEqual(37, ( 97).wrapped(within: 30..<50))
        XCTAssertEqual(38, ( 98).wrapped(within: 30..<50))
        XCTAssertEqual(39, ( 99).wrapped(within: 30..<50))
        
        guard #available(macOS 12.0, *) else {
            return
        }

        let testRange: Range<CGFloat> = 3..<5

        var tests: [(base: CGFloat, wrapped: CGFloat)] = []

        let ranges: [(integer: [Int], negative: Bool, fraction: [Int])] = [
            (integer:      (0...9).reversed(), negative: true,       (0...9).reversed()),
            (integer: Array(0...9),            negative: false, Array(0...9)           ),
        ]

        for range in ranges {
            for integer in range.integer {
                for fraction in range.fraction {
                    let base = try! CGFloat("\(range.negative ? "-" : "")\(integer).\(fraction)", format: FloatingPointFormatStyle())
                    tests.append((base: base, wrapped: base.wrapped(within: testRange)))
                }
            }
        }

        let csv = tests.map { "\($0.base),\($0.wrapped)" }.joined(separator: "\n")
        NSPasteboard.general.declareTypes([.string], owner: nil)
        NSPasteboard.general.setString(csv, forType: .string)
        
        XCTAssertEqual(4.1, (-9.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.2, (-9.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.3, (-9.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.4, (-9.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.5, (-9.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.6, (-9.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.7, (-9.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.8, (-9.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.9, (-9.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.0, (-9.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.1, (-8.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.2, (-8.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.3, (-8.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.4, (-8.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.5, (-8.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.6, (-8.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.7, (-8.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.8, (-8.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.9, (-8.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.0, (-8.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.1, (-7.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.2, (-7.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.3, (-7.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.4, (-7.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.5, (-7.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.6, (-7.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.7, (-7.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.8, (-7.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.9, (-7.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.0, (-7.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.1, (-6.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.2, (-6.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.3, (-6.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.4, (-6.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.5, (-6.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.6, (-6.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.7, (-6.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.8, (-6.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.9, (-6.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.0, (-6.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.1, (-5.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.2, (-5.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.3, (-5.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.4, (-5.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.5, (-5.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.6, (-5.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.7, (-5.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.8, (-5.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.9, (-5.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.0, (-5.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.1, (-4.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.2, (-4.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.3, (-4.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.4, (-4.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.5, (-4.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.6, (-4.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.7, (-4.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.8, (-4.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.9, (-4.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.0, (-4.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.1, (-3.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.2, (-3.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.3, (-3.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.4, (-3.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.5, (-3.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.6, (-3.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.7, (-3.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.8, (-3.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.9, (-3.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.0, (-3.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.1, (-2.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.2, (-2.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.3, (-2.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.4, (-2.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.5, (-2.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.6, (-2.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.7, (-2.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.8, (-2.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.9, (-2.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.0, (-2.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.1, (-1.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.2, (-1.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.3, (-1.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.4, (-1.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.5, (-1.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.6, (-1.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.7, (-1.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.8, (-1.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.9, (-1.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.0, (-1.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.1, (-0.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.2, (-0.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.3, (-0.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.4, (-0.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.5, (-0.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.6, (-0.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.7, (-0.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.8, (-0.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.9, (-0.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.0, (-0.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.0, ( 0.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.1, ( 0.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.2, ( 0.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.3, ( 0.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.4, ( 0.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.5, ( 0.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.6, ( 0.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.7, ( 0.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.8, ( 0.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.9, ( 0.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.0, ( 1.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.1, ( 1.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.2, ( 1.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.3, ( 1.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.4, ( 1.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.5, ( 1.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.6, ( 1.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.7, ( 1.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.8, ( 1.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.9, ( 1.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.0, ( 2.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.1, ( 2.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.2, ( 2.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.3, ( 2.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.4, ( 2.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.5, ( 2.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.6, ( 2.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.7, ( 2.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.8, ( 2.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.9, ( 2.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.0, ( 3.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.1, ( 3.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.2, ( 3.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.3, ( 3.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.4, ( 3.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.5, ( 3.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.6, ( 3.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.7, ( 3.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.8, ( 3.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.9, ( 3.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.0, ( 4.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.1, ( 4.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.2, ( 4.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.3, ( 4.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.4, ( 4.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.5, ( 4.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.6, ( 4.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.7, ( 4.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.8, ( 4.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.9, ( 4.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.0, ( 5.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.1, ( 5.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.2, ( 5.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.3, ( 5.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.4, ( 5.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.5, ( 5.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.6, ( 5.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.7, ( 5.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.8, ( 5.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.9, ( 5.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.0, ( 6.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.1, ( 6.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.2, ( 6.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.3, ( 6.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.4, ( 6.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.5, ( 6.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.6, ( 6.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.7, ( 6.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.8, ( 6.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.9, ( 6.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.0, ( 7.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.1, ( 7.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.2, ( 7.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.3, ( 7.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.4, ( 7.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.5, ( 7.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.6, ( 7.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.7, ( 7.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.8, ( 7.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.9, ( 7.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.0, ( 8.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.1, ( 8.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.2, ( 8.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.3, ( 8.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.4, ( 8.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.5, ( 8.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.6, ( 8.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.7, ( 8.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.8, ( 8.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(4.9, ( 8.9).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.0, ( 9.0).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.1, ( 9.1).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.2, ( 9.2).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.3, ( 9.3).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.4, ( 9.4).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.5, ( 9.5).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.6, ( 9.6).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.7, ( 9.7).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.8, ( 9.8).wrapped(within: 3..<5), accuracy: 0.001)
        XCTAssertEqual(3.9, ( 9.9).wrapped(within: 3..<5), accuracy: 0.001)
    }
}
